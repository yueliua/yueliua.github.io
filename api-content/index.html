{"posts":[{"title":"tesserocr二值化识别知网登录验证码","content":" 随机获取了知网登录界面的三个图片验证码，测试 tesserocr 识别验证码的准确度 编写代码，先测试pic1 import tesserocr # 导入tesserocr模块 from PIL import Image # 导入图像处理模块 img = Image.open('pic1.png') code_result = tesserocr.image_to_text(img) print('识别结果：', code_result) pic1识别结果：PEHK. 由于验证码图片中带有很多干扰线条，导致识别结果不准确（后面多一个点). 接下来，进行图片灰度测试看看能不能解决问题 import tesserocr # 导入tesserocr模块 from PIL import Image # 导入图像处理模块 img = Image.open('pic1.png') lim = img.convert('L') # 图片灰度化 img.show() # 打印图片 code_result = tesserocr.image_to_text(lim) print('识别结果：', code_result) 测试结果：PEHK. 还是有个点 继续进行图片二值化 import tesserocr # 导入tesserocr模块 from PIL import Image # 导入图像处理模块 img = Image.open('pic1.png') width = img.size[0] lim = img.convert('L') # 图片灰度化 # img.show() # 打印图片 threshold = 155 # 设置阈值 data = [] # 定义一个空列表，接收二值化数据 for i in range(0, 256): if i &lt; threshold: data.append(0) else: data.append(1) bim = lim.point(data,'1') # 图片二值化 bim.show() # 打印二值化后的图片 code_result = tesserocr.image_to_text(bim) print('识别结果：', code_result) 二值化结果：成功识别到验证码 【PEHK】 经过测试，pic2 以及 pic3 在二值化后都可以识别出来，如果二值化后还无法精确识别，则需要调整二值化阈值（threshold = 155）。关于图像二值化，参考 -遇到的【问题1】：tessdata路径报错 解决: tessdata的路径出错，找到tesseract安装路径，把tessdata文件夹复制一份到anaconda路径下面，例如：C:\\ProgramData\\Anaconda3\\tessdata -遇到的【问题2】：安装tesserocr模块失败 解决：参考我的另一篇博客（https://editor.csdn.net/md/?articleId=123265184） ","link":"https://blog.fintechme.top/post/tesserocr-er-zhi-hua-shi-bie-zhi-wang-deng-lu-yan-zheng-ma/"},{"title":"使用打码平台登录B站","content":"B站登录需要用到图片点坐标点选类型的验证码验证，使用传统的OCR技术解决起来比较棘手，因此借助于第三方打码平台，可以快速实现这一功能。 创建项目【使用打码平台登录B站】，新建python文件【bili.py】【img_api.py】【accounts.py】 进入【accounts.py】，定义你的打码平台和B站账号以及密码 &quot;&quot;&quot;快识别账号密码&quot;&quot;&quot; KUAI_USER = '你的账号' KUAI_PASS = '你的密码' &quot;&quot;&quot;B站账号密码&quot;&quot;&quot; BILI_USER = '你的账号' BILI_PASS = '你的密码' 进入【img_api.py】文件，进入打码平台开发文档的python接口（上面有提示，不打广告），把开发文档复制到【img_api.py】 import base64 import json import requests # 一、图片文字类型(默认 3 数英混合)： # 1 : 纯数字 # 1001：纯数字2 # 2 : 纯英文 # 1002：纯英文2 # 3 : 数英混合 # 1003：数英混合2 # 4 : 闪动GIF # 7 : 无感学习(独家) # 11 : 计算题 # 1005: 快速计算题 # 16 : 汉字 # 32 : 通用文字识别(证件、单据) # 66: 问答题 # 49 :recaptcha图片识别 # 二、图片旋转角度类型： # 29 : 旋转类型 # # 三、图片坐标点选类型： # 19 : 1个坐标 # 20 : 3个坐标 # 21 : 3 ~ 5个坐标 # 22 : 5 ~ 8个坐标 # 27 : 1 ~ 4个坐标 # 48 : 轨迹类型 # # 四、缺口识别 # 18 : 缺口识别（需要2张图 一张目标图一张缺口图） # 33 : 单缺口识别（返回X轴坐标 只需要1张图） # 五、拼图识别 # 53：拼图识别 def base64_api(uname, pwd, img, typeid): with open(img, 'rb') as f: base64_data = base64.b64encode(f.read()) b64 = base64_data.decode() data = {&quot;username&quot;: uname, &quot;password&quot;: pwd, &quot;typeid&quot;: typeid, &quot;image&quot;: b64} result = json.loads(requests.post(&quot;http://api.ttshitu.com/predict&quot;, json=data).text) if result['success']: return result[&quot;data&quot;][&quot;result&quot;] else: return result[&quot;message&quot;] return &quot;&quot; if __name__ == &quot;__main__&quot;: img_path = &quot;C:/Users/Administrator/Desktop/file.jpg&quot; result = base64_api(uname='你的账号', pwd='你的密码', img=img_path, typeid=3) print(result) 重写【img_api.py】文件 import base64 from accounts import KUAI_USER, KUAI_PASS # accounts.py中导入你定义的打码平台账号和密码变量 import requests def base64_api(img): # 定义一个函数, 把用户名,密码 和图片路径传进去 with open(img, 'rb') as f: # 打开请求到的验证码图片 base64_data = base64.b64encode(f.read()).decode() # 读取验证码图片并且转换成字符串类型 data = {&quot;username&quot;: KUAI_USER , &quot;password&quot;: KUAI_PASS, &quot;typeid&quot;: 21, &quot;image&quot;: base64_data} # 用户名和密码导入，typeid是根据开发文档查到的对应接口数字（B站验证码为图片坐标点选类型), image是图片字符串数据 result = requests.post(&quot;http://api.ttshitu.com/predict&quot;, data=data).json() # 携带data参数，发送post请求，返回json数据 if result['success']: return result[&quot;data&quot;][&quot;result&quot;] else: return result[&quot;message&quot;] if __name__ == &quot;__main__&quot;: img_path = &quot;yzm.png&quot; # 相对路径，由【bili.py】保存在项目文件下 result = base64_api(img=img_path) # 把img_path传递进去，调用base64_api函数 print(result) 进入谷歌浏览器，搜索栏输入：chrome://version 查看浏览器版本 进入（https://registry.npmmirror.com/binary.html?path=chromedriver/）查找谷歌浏览器对应的版本号，下载下来并解压，放到项目路径下面 进入【bili.py】，编写主程序 import time from selenium.webdriver.common.by import By from accounts import BILI_USER, BILI_PASS from selenium import webdriver from selenium.webdriver import ActionChains from img_api import base64_api driver = webdriver.Chrome() # 实例化浏览器驱动 driver.get('https://passport.bilibili.com/login') # 发送请求 driver.implicitly_wait(10) # 隐式等待10秒 driver.maximize_window() # 最大化浏览器窗口 &quot;&quot;&quot;找用户名和密码框, 输入数据&quot;&quot;&quot; username_input = driver.find_element(By.CSS_SELECTOR, '#login-username') # 使用css语法定位用户名输入框 username_input.click() # 点击账号输入框 time.sleep(0.5) # 强制等待0.5秒 username_input.send_keys(BILI_USER) # 传入账号 time.sleep(0.5) # 强制等待0.5秒 password_input = driver.find_element(By.CSS_SELECTOR, '#login-passwd') # 使用css语法定位密码输入框 password_input.click() # 点击密码输入框 time.sleep(0.5) password_input.send_keys(BILI_PASS) # 传入密码 time.sleep(0.5) &quot;&quot;&quot;点击登录按钮&quot;&quot;&quot; time.sleep(0.5) driver.find_element(By.CSS_SELECTOR, '.btn.btn-login').click() # 使用css语法定位登录按钮并点击 time.sleep(2) # 找验证码对应的标签 img_label = driver.find_element(By.CSS_SELECTOR, '.geetest_holder.geetest_silver') # 点击登录后跳转到验证码验证界面，使用css语法定位到验证码标签对象 &quot;&quot;&quot;直接根据标签元素保存图片&quot;&quot;&quot; time.sleep(4) # 保存验证码前一定要加强制等待 img_label.screenshot('yzm.png') # 截取验证码图片 time.sleep(4) print('正在保存验证码...') &quot;&quot;&quot;识别图验证码&quot;&quot;&quot; code_result_list = base64_api('yzm.png') # 调用【img_api.py】，返回的数据是X,Y 坐标值 print('验证码识别结果为:', code_result_list) # 113,79|197,147 result_list = code_result_list.split('|') # ['113,79', '197,147']，转换成列表 for result in result_list: x = result.split(',')[0] # 根据列表索引取出 X 坐标值，是str类型 y = result.split(',')[1] # 根据列表索引取出 Y 坐标值，是str类型 # ActionChains 鼠标动作链对象 # move_to_element_with_offset 根据元素执行点击操作 # perform() 执行动作链 ActionChains(driver).move_to_element_with_offset(img_label, int(x), int(y)).click().perform() time.sleep(5) &quot;&quot;&quot;点击确认&quot;&quot;&quot; driver.find_element(By.CSS_SELECTOR, '.geetest_commit_tip').click() input() driver.quit() 运行【bili.py】 跳转到短信验证码登录页面，证明打码成功 ","link":"https://blog.fintechme.top/post/shi-yong-da-ma-ping-tai-deng-lu-b-zhan/"},{"title":"搭建个人博客网站","content":"准备工作 购买服务器：注册成功后，点击部署，配置自选 购买域名：域名备案等操作 域名映射 软件配置（latest version）： Nginx MySQL MariaDB PHP wordpress Center-os8 配置步骤 连接服务器 mac可以通过终端，或者使用可视化软件 Royal RSX windows可以通过putty进行远程连接服务器 关闭防火墙及SELinux systemctl disable firewalld nano /etc/selinux/config 修改配置文件： SELINUX=disabled 配置nginx 安装 dnf install nginx -y 启动nginx服务，并设置开机自启动 systemctl start nginx systemctl enable nginx 安装MariaDB数据库 安装 dnf install mariadb-server -y 启动MariaDB服务，并设置开机自启动 systemctl start mariadb systemctl enable mariadb 设置密码 mysql_secure_installation 设置过程中提问： Enter current password for root (enter for none): #服务器中的密码 Set root password? [Y/n] Y New password: Re-enter new password: Remove anonymous users? [Y/n] Y Disallow root login remotely? [Y/n] Y Remove test database and access to it? [Y/n] Y Reload privilege tables now? [Y/n] Y 安装PHP 安装 dnf install https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm dnf install https://rpms.remirepo.net/enterprise/remi-release-8.rpm 安装依赖及拓展 dnf module reset php dnf module install php:remi-8.0 -y dnf install php php-mysqlnd php-fpm php-opcache php-curl php-json php-gd php-xml php-mbstring php-zip -y 修改PHP配置文件 进入php配置文件 nano /etc/php-fpm.d/www.conf 修改内容 user = nginx group = nginx 保存并重启php-fpm systemctl start php-fpm systemctl enable php-fpm 创建wordpress数据库 mysql -u root -p CREATE DATABASE wordpressdb; CREATE USER `wordpressuser`@`localhost` IDENTIFIED BY 'securepassword'; GRANT ALL ON wordpressdb.* TO `wordpressuser`@`localhost`; FLUSH PRIVILEGES; EXIT; 下载安装wordpress yourdomain.com为映射好的个人域名，不能输错 cd /var/www/html wget https://wordpress.org/latest.tar.gz tar -xvzf latest.tar.gz mv wordpress yourdomain.com chown -R nginx:nginx /var/www/html/yourdomain.com 为 WordPress 创建 Nginx 虚拟主机 进入nginx配置文件 nano /etc/nginx/conf.d/yourdomain.conf 添加内容 server { listen 80; server_name yourdomain.com www.yourdomain.com; root /var/www/html/yourdomain.com; index index.php index.html index.htm; location / { try_files $uri $uri/ =404; } error_page 404 /404.html; error_page 500 502 503 504 /50x.html; location = /50x.html { root /usr/share/nginx/html; } location ~ \\.php$ { try_files $uri =404; fastcgi_pass unix:/var/run/php-fpm/www.sock; fastcgi_index index.php; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; include fastcgi_params; } } 重启ngnix服务 systemctl restart nginx 访问wordpress网站：https://yourdomain.com，根据提示填入注册信息 配置网站样式、发布内容等系列操作 参考： Centos8安装wordpress How to Install WordPress on CentOS 8 (Step by Step) Tutorial mac终端操作mysql数据库常用命令 ","link":"https://blog.fintechme.top/post/da-jian-ge-ren-bo-ke-wang-zhan/"}]}